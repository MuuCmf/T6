"use strict";!function(a,n){function s(t){t.url&&(t.msg+="，页面即将跳转～"),200==t.code?toast.success(t.msg,"success"):toast.error(t.msg,"danger"),"refresh"==t.url?setTimeout(function(){location.href=location.href},1e3):t.url&&setTimeout(function(){location.href=t.url},1e3)}function o(t,e){return t='<div class="modal fade confirm-modal" id="tip_Modal"><div class="modal-dialog modal-tip"><div class="modal-content"><div class="modal-body">'+('<div class="text-center"><i class="fa fa-exclamation-circle"></i><p class="title">系统提示</p><p class="desc">'+(t=""==t?"确认执行该操作？":t)+'</p><div class="text-center"><button class="btn btn-info confirm margin-right" type="button">确认</button><button type="button" class="btn" data-dismiss="modal">取消</button></div></div>')+"</div></div></div></div>",0==a("#tip_Modal").length&&a("body").append(t),a("#tip_Modal").modal("show"),a("#tip_Modal").off("click",".confirm"),a("#tip_Modal").on("click",".confirm",function(){"function"==typeof e&&e(),a('[data-dismiss="modal"]').click(),a("#tip_Modal").remove(),a(".modal-backdrop").remove()}),!1}a(document).ready(function(){a(document).on("click",".ajax-post",function(t){t.preventDefault();t=a(this).attr("target-form");if(t){var e=a("."+t).serialize();if(""==e)return toast.error("请勾选操作对象!。","danger"),!1}var i,r=a(this).attr("href");if(a(this).attr("url")&&(r=a(this).attr("url")),a(this).attr("data-url")&&(r=a(this).attr("data-url")),i=a(this).attr("data-confirm")||a(this).hasClass("confirm")?(i=a(this).attr("data-confirm"))||"确认要执行该操作吗?":i)return o(i,function(){n()}),!1;function n(){a.post(r,e,function(t,e,i){s(t)})}n()}),a(document).on("click",".ajax-get",function(t){t.preventDefault();t=a(this).attr("target-form");if(t&&""==a("."+t).serialize())return toast.error("请勾选操作对象!。","danger"),!1;var e,i=a(this).attr("href");if(a(this).attr("url")&&(i=a(this).attr("url")),a(this).attr("data-url")&&(i=a(this).attr("data-url")),e=a(this).attr("data-confirm")||a(this).hasClass("confirm")?(e=a(this).attr("data-confirm"))||"确认要执行该操作吗?":e)return o(e,function(){r()}),!1;function r(){a.get(i,function(t){s(t)})}r()}),a(document).on("submit","form.ajax-form",function(t){t.preventDefault();var t=a(this).attr("data-confirm"),r=a(this);return""==r.serialize()?(toast.hideLoading(),toast.error("请勾选操作对象!。","danger")):t?o(t,function(){e()}):e(),!1;function e(){a("[type=submit]",r).addClass("disabled");var t=r.attr("action"),e=r.attr("method"),t=t||n.location.href,e=e||"get",i=r.serialize();("post"==e?a.post:a.get)(t,i,function(t){s(t),a("[type=submit]",r).removeClass("disabled")})}})}),n.handle_ajax=s,n.modal_confirm=o}(jQuery,window);var admin_image={removeImage:function(t,e){this.upAttachVal("del",e,t),t.parents(".each").remove()},upAttachVal:function(t,e,i){var r,i=i.parents(".controls").find(".attach"),n=i.val().split(","),a=[];for(r in n)""!==n[r]&&n[r]!==e.toString()&&a.push(n[r]);return"add"===t&&a.push(e),i.val(a.join(",")),a}};function isAndroid(){var t=navigator.userAgent;return(-1<t.indexOf("Android")||-1<t.indexOf("Linux"))&&void 0!==window.ShowFitness}function isIos(){var t=navigator.userAgent;return-1<t.indexOf("iPhone")||-1<t.indexOf("iOS")}$(function(){$(".check-all").click(function(){$(".ids").prop("checked",this.checked)}),$(".ids").click(function(){$(".ids").each(function(t){return this.checked?void $(".check-all").prop("checked",!0):($(".check-all").prop("checked",!1),!1)})}),$(".text").focus(function(){$(this).addClass("focus")}).blur(function(){$(this).removeClass("focus")}),$("textarea").focus(function(){$(this).closest(".textarea").addClass("focus")}).blur(function(){$(this).closest(".textarea").removeClass("focus")})}),function(i,t){if(void 0===i)throw new Error("muu requires jQuery");i.muu||(i.muu=function(t){i.isPlainObject(t)&&i.extend(i.muu,t)}),t.toast={success:function(t){toast.show(t,{placement:"center",type:"success",close:!0})},error:function(t){toast.show(t,{placement:"center",type:"danger",close:!0})},info:function(t){toast.show(t,{placement:"center",type:"info",close:!0})},warning:function(t,e){toast.show(t,{placement:"center",type:"warning",close:!0})},show:function(t,e){new i.zui.Messager(t,e).show()},showLoading:function(){i("body").append('<div class="big_loading"><img src="/static/common/images/big_loading.gif"/></div>')},hideLoading:function(){i("div").remove(".big_loading")}}}(jQuery,window),function(s){var t=window.Think={};t||s.error("ThinkPHP基础配置没有正确加载！"),t.parse_url=function(t){t=t.match(/^(?:([a-z]+):\/\/)?([\w-]+(?:\.[\w-]+)+)?(?::(\d+))?([\w-\/]+)?(?:\?((?:\w+=[^#&=\/]*)?(?:&\w+=[^#&=\/]*)*))?(?:#([\w-]+))?$/i);return t||s.error("url格式不正确！"),{scheme:t[1],host:t[2],port:t[3],path:t[4],query:t[5],fragment:t[6]}},t.parse_str=function(t){var e,i=t.split("&"),r={};for(val in i)r[(e=i[val].split("="))[0]]=e[1];return r},t.parse_name=function(t,e){return e?(t.replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),t.replace(/[a-z]/,function(t){return t.toUpperCase()})):0===(t=t.replace(/[A-Z]/g,function(t){return"_"+t.toLowerCase()})).indexOf("_")&&(t=t.substr(1)),t},t.url=function(t,e,i){var r=this.parse_url(t),n=[],a={};return r.path||s.error("url格式错误！"),t=0===(t=r.path).indexOf("/")?(0==this.MODEL[0]&&s.error("该URL模式不支持使用路由!("+t+")"),"/"==t.substr(-1)&&(t=t.substr(0,t.length-1)),"/"+(t="/"==this.DEEP?t.substr(1):t.substr(1).replace(/\//g,this.DEEP))):((n=[(n=t.split("/")).pop(),n.pop(),n.pop()].reverse())[1]||s.error("ThinkPHP.Url("+t+")没有指定控制器"),n[0]&&(a[this.VAR[0]]=this.MODEL[1]?n[0].toLowerCase():n[0]),a[this.VAR[1]]=this.MODEL[1]?this.parse_name(n[1]):n[1],a[this.VAR[2]]=n[2].toLowerCase(),"?"+s.param(a)),"string"==typeof e?e=this.parse_str(e):s.isPlainObject(e)||(e={}),r.query&&s.extend(e,this.parse_str(r.query)),e&&(t+="&"+s.param(e)),0!=this.MODEL[0]&&(t=t.replace("?"+(n[0]?this.VAR[0]:this.VAR[1])+"=","/").replace("&"+this.VAR[1]+"=",this.DEEP).replace("&"+this.VAR[2]+"=",this.DEEP).replace(/(\w+=&)|(&?\w+=$)/g,"").replace(/[&=]/g,this.DEEP),!1!==i&&(i=i||this.MODEL[2].split("|")[0])&&(t+="."+i)),t=this.APP+t},t.setValue=function(t,e){var i,r,n=t.substr(0,1),a=0;if(""!==e)if((i=s("#"===n||"."===n?t:"[name='"+t+"']")).eq(0).is(":radio"))i.filter("[value='"+e+"']").each(function(){this.checked=!0});else if(i.eq(0).is(":checkbox"))for(s.isArray(e)?r=e:(r=new Array)[0]=e,a=0,len=r.length;a<len;a++)i.filter("[value='"+r[a]+"']").each(function(){this.checked=!0});else i.val(e)}}(jQuery);