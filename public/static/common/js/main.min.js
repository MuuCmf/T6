"use strict";!function(a,i){function s(t){t.url&&(t.msg+="，页面即将跳转～"),200==t.code?toast.success(t.msg,"success"):toast.error(t.msg,"danger"),"refresh"==t.url?setTimeout(function(){location.href=location.href},1e3):t.url&&setTimeout(function(){location.href=t.url},1e3)}function r(t,e){return t='<div class="modal fade confirm-modal" id="tip_Modal"><div class="modal-dialog modal-tip"><div class="modal-content"><div class="modal-body">'+('<div class="text-center"><i class="fa fa-exclamation-circle"></i><p class="title">系统提示</p><p class="desc">'+(t=""==t?"确认执行该操作？":t)+'</p><div class="btns text-center"><button class="btn btn-info confirm margin-right" type="button">确认</button><button type="button" class="btn" data-dismiss="modal">取消</button></div></div>')+"</div></div></div></div>",0==a("#tip_Modal").length&&a("body").append(t),a("#tip_Modal").modal("show"),a("#tip_Modal").off("click",".confirm"),a("#tip_Modal").on("click",".confirm",function(){"function"==typeof e&&e(),a('[data-dismiss="modal"]').click(),a("#tip_Modal").remove(),a(".modal-backdrop").remove()}),!1}a(document).ready(function(){a(document).on("click",".ajax-post",function(t){t.preventDefault();t=a(this).attr("target-form");if(t){var e=a("."+t).serialize();if(""==e)return toast.error("请勾选操作对象!。","danger"),!1}var o,n=a(this).attr("href");if(a(this).attr("url")&&(n=a(this).attr("url")),a(this).attr("data-url")&&(n=a(this).attr("data-url")),o=a(this).attr("data-confirm")||a(this).hasClass("confirm")?(o=a(this).attr("data-confirm"))||"确认要执行该操作吗?":o)return r(o,function(){i()}),!1;function i(){a.post(n,e,function(t,e,o){s(t)})}i()}),a(document).on("click",".ajax-get",function(t){t.preventDefault();t=a(this).attr("target-form");if(t&&""==a("."+t).serialize())return toast.error("请勾选操作对象!。","danger"),!1;var e,o=a(this).attr("href");if(a(this).attr("url")&&(o=a(this).attr("url")),a(this).attr("data-url")&&(o=a(this).attr("data-url")),e=a(this).attr("data-confirm")||a(this).hasClass("confirm")?(e=a(this).attr("data-confirm"))||"确认要执行该操作吗?":e)return r(e,function(){n()}),!1;function n(){a.get(o,function(t){s(t)})}n()}),a(document).on("submit","form.ajax-form",function(t){t.preventDefault();var t=a(this).attr("data-confirm"),n=a(this);return""==n.serialize()?(toast.hideLoading(),toast.error("请勾选操作对象!。","danger")):t?r(t,function(){e()}):e(),!1;function e(){a("[type=submit]",n).addClass("disabled");var t=n.attr("action"),e=n.attr("method"),t=t||i.location.href,e=e||"get",o=n.serialize();("post"==e?a.post:a.get)(t,o,function(t){s(t),a("[type=submit]",n).removeClass("disabled")})}})}),i.handleAjax=s,i.handle_ajax=s,i.modal_confirm=r}(jQuery,window);var follower={bind_follow:function(){$('[data-role="follow"]').unbind("click"),$('[data-role="follow"]').click(function(){var e=$(this),t=e.attr("data-follow-who");$.post(Url("Ucenter/Public/follow"),{uid:t},function(t){t.status?(e.attr("class",e.attr("data-before")),e.attr("data-role","unfollow"),e.html("已关注"),follower.bind_follow(),toast.success(t.info,"温馨提示")):toast.error(t.info,"温馨提示")},"json")}),$('[data-role="unfollow"]').unbind("click"),$('[data-role="unfollow"]').click(function(){var e=$(this),t=e.attr("data-follow-who");$.post(Url("Ucenter/Public/unfollow"),{uid:t},function(t){t.status?(e.attr("class",e.attr("data-after")),e.attr("data-role","follow"),e.html("关注"),follower.bind_follow(),toast.success(t.info,"温馨提示")):toast.error(t.info,"温馨提示")},"json")})}};function is_login(){return parseInt(MID)}function url(t,e,o){var n="/";return""!=(t=t.split("/"))[0]&&"@"!=t[0]||(t[0]=APPNAME),t[1]||(t[1]="Index"),t[2]||(t[2]="index"),n=n+t[0]+"/"+t[1]+"/"+t[2],e&&(n=n+"/"+(e=e.join("/"))),o||(n+=".html"),n}function playsound(t){$("embed").remove(),$("body").append('<embed src="'+t+'" autostart="true" hidden="true" loop="false">')}function friendlyDate(t,e){function o(t){return t<10?"0"+t:t}if(!t)return"";var n=new Date(1e3*e),i=new Date(1e3*t),a=e-t,e=parseInt(n.getDate())-parseInt(i.getDate()),t=parseInt(n.getMonth()+1)-parseInt(i.getMonth()+1),n=parseInt(n.getFullYear())-parseInt(i.getFullYear());return a<60?a<10?"刚刚":parseInt(10*Math.floor(a/10))+"秒前":a<3600?parseInt(Math.floor(a/60))+"分钟前":0==n&&0==t&&0==e?"今天"+o(i.getHours())+":"+o(i.getMinutes()):0==n?o(i.getMonth()+1)+"月"+o(i.getDate())+"日 "+o(i.getHours())+":"+o(i.getMinutes()):i.getFullYear()+"-"+o(i.getMonth()+1)+"-"+o(i.getDate())+" "+o(i.getHours())+":"+o(i.getMinutes())}follower.bind_follow(),function($){var obj,checkCan=new Array,patterns=new Object;patterns.Ip=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])(\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){3}$/,patterns.Email=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,patterns.Date=/^\d{4}-(0?[1-9]|1[0-2])-(0?[1-9]|[1-2]\d|3[0-1])$/,patterns.Time=new RegExp("^([0-1]\\d|2[0-3]):[0-5]\\d:[0-5]\\d$"),patterns.Num=/^[0-9]*$/,patterns.FloatNum=/^\d+(\.\d+)?$/,patterns.DateAndTime=/^(?:19|20)[0-9][0-9]-(?:(?:0[1-9])|(?:1[0-2]))-(?:(?:[0-2][1-9])|(?:[1-3][0-1])) (?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9](:[0-5][0-9])?$/,patterns.Phone=/^(1[3|4|5|8])[0-9]{9}$/,patterns.Chinese=/^[\u4e00-\u9fa5]{2,8}$/,patterns.QQ=new RegExp("^[1-9]\\d{4,10}$"),patterns.Telephone=/^((0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/,patterns.isIDCard1=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/,patterns.isIDCard2=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;var bind_form_check=function bind_form_check(){$(".form_check").after('<div class=" show_info" ></div>'),$(".form_check").click(function(){}),$(".form_check").focus(function(){}),$(".form_check").blur(function(){obj=$(this);var type=obj.attr("check-type"),check=eval("check"+type+"()")}),$(".form_check").change(function(){$(this).blur()}),$(":submit").click(function(t){var e,o=!0;for(e in checkCan)o&=checkCan[e];if(!o)return toast.error("请填写完整且正确的信息后再提交！"),t.preventDefault(),!1})},checkEmpty=function(){return 0!=obj.val().length},checkInputLength=function(){var t=obj.val().replace(/\s+/g,"");if(0==t.length)return{status:0,info:"不能为空"};if(void 0!==obj.attr("check-length")){new Array;var e=obj.attr("check-length").split(",");if(e[1]){if("*"==e[1]){if(t.length<e[0])return{status:0,info:"字数不能少于"+e[0]+"个"}}else if(e[1]<t.length||t.length<e[0])return{status:0,info:"要求字数为"+e[0]+"-"+e[1]+"个"}}else if(e[0]<t.length)return{status:0,info:"字数不能少于"+e[0]+"个"}}return{status:1,info:""}},checkText=function(){return{status:1,info:""}},checkChinese=function(){var t=obj.val();return patterns.Chinese.test(t)?{status:1,info:""}:{status:0,info:"请输入2-8个汉字的姓名"}},checkQQ=function(){var t=obj.val();return patterns.QQ.test(t)?{status:1,info:""}:{status:0,info:"请输入正确qq号！"}},checkEmail=function(){var t=obj.val();return patterns.Email.test(t)?{status:1,info:""}:{status:0,info:"请输入正确Email地址！"}},checkIDCard=function(){var t=obj.val();return patterns.isIDCard1.test(t)||patterns.isIDCard2.test(t)?{status:1,info:""}:{status:0,info:"请输入正确身份证号！"}},checkDate=function(){var t=obj.val();return patterns.Date.test(t)?{status:1,info:""}:{status:0,info:"请填写正确的格式！"}},checkDateAndTime=function(){var t=obj.val();return patterns.DateAndTime.test(t)?{status:1,info:""}:{status:0,info:"请填写正确的格式！"}},checkNum=function(){var t=obj.val();if(patterns.Num.test(parseInt(t))){if(void 0!==obj.attr("check-value")){new Array;var e=obj.attr("check-value").split(","),t=parseInt(obj.val());if(e[1]){if("*"==e[1])if(t<parseInt(e[0]))return o={status:0,info:"数字至少为"+parseInt(e[0])};if(parseInt(e[1])<t||t<parseInt(e[0]))return o={status:0,info:"数字范围在"+e+"内"}}else if(parseInt(e[0])<t)return o={status:0,info:"数字范围在"+e+"内"}}var o={status:1,info:""}}else o={status:0,info:"请填写数字！"};return o},checkIntNum=function(){var t=obj.val();if(parseInt(t)!=t)return o={status:0,info:"请填写整数数字！"};if(patterns.Num.test(parseInt(t))){if(void 0!==obj.attr("check-value")){new Array;var e=obj.attr("check-value").split(","),t=parseInt(obj.val());if(e[1]){if("*"==e[1])if(t<parseInt(e[0]))return o={status:0,info:"数字至少为"+parseInt(e[0])};if(parseInt(e[1])<t||t<parseInt(e[0]))return o={status:0,info:"数字范围在"+e+"内"}}else if(parseInt(e[0])<t)return o={status:0,info:"数字范围在"+e+"内"}}var o={status:1,info:""}}else o={status:0,info:"请填写整数数字！"};return o},checkFloatNum=function(){var t=obj.val();if(parseFloat(t)!=t)return o={status:0,info:"请填写浮点型数字！"};if(patterns.FloatNum.test(parseFloat(t))){if(void 0!==obj.attr("check-value")){new Array;var e=obj.attr("check-value").split(","),t=parseFloat(obj.val());if(e[1]){if("*"==e[1])if(t<parseFloat(e[0]))return o={status:0,info:"数字至少为"+parseFloat(e[0])};if(parseFloat(e[1])<t||t<parseFloat(e[0]))return o={status:0,info:"数字范围在"+e+"内"}}else if(parseFloat(e[0])<t)return o={status:0,info:"数字范围在"+e+"内"}}var o={status:1,info:""}}else o={status:0,info:"请填写整数数字！"};return o},checkPhoneOrTelephone=function(){var t=obj.val();return patterns.Phone.test(parseInt(t))||patterns.Telephone.test(t)?{status:1,info:""}:{status:0,info:"请填写手机号码或固定电话！"}},checkPhone=function(){var t=obj.val();return patterns.Phone.test(parseInt(t))?{status:1,info:""}:{status:0,info:"请填写手机号码！"}},checkTelephone=function(){var t=obj.val();return patterns.Telephone.test(t)?{status:1,info:""}:{status:0,info:"请填写固定电话号码！"}},checkSelect=function(){var t=obj.val();if(0==t&&1==obj.attr("can-empty"))return check_form.remove(),void(checkCan[obj.attr("name")]=1);return 0!=t&&""!=t&&void 0!==t?{status:1,info:""}:{status:0,info:"请选择！"}},checkRegExps=function(){if(void 0!==(t=obj.attr("reg-exp"))){var t,e=obj.val();return(t=new RegExp(t)).test(e)?{status:1,info:""}:{status:0,info:obj.attr("error-info")||"请按正确格式填写！"}}checkCan[obj.attr("name")]=1},checkUsername=function(){var t=obj.val(),e=obj.attr("check-url");$.post(e,{account:t,type:"username"},function(t){ajaxRerurn(t)},"json")},checkUserEmail=function(){var t=obj.val(),e=obj.attr("check-url");$.post(e,{account:t,type:"email"},function(t){ajaxRerurn(t)},"json")},checkUserMobile=function(){var t=obj.val(),e=obj.attr("check-url");$.post(e,{account:t,type:"mobile"},function(t){ajaxRerurn(t)},"json")},checkNickname=function(){var t=obj.val(),e=obj.attr("check-url");$.post(e,{nickname:t},function(t){ajaxRerurn(t)},"json")},ajaxRerurn=function(t){t.code?(checkCan[obj.attr("name")]=1,check_form.success(t.msg)):(checkCan[obj.attr("name")]=0,check_form.error(t.msg))},showInfo=function(t,e){check_form.remove(),1==e?(check_form.success(t),check_form.remove()):check_form.error(t)},removeInfo=function(){obj.parent().find(".show_info").html("")},check_form={remove:function(){removeInfo()},error:function(t){t='<div class="send red"><i class="icon-remove-sign"></i> '+t+"</div>";obj.parent().find(".show_info").html(t)},success:function(t){t='<div class="send green"><i class="icon-check-circle"></i> '+t+"</div>";obj.parent().find(".show_info").html(t)}};$(document).ready(function(t){bind_form_check()})}(jQuery),$("#item").each(function(){var t=$(this).text().split(""),t=(t.splice(3,4,"****"),t.toString().replace(/,/gi,""));$(this).text(t)}),$(function(){$(window).on("scroll",function(){0<$(document).scrollTop()?$("#go-top").css("display","block"):$("#go-top").hide()}),$("#tool .go-top").on("click",function(){$("html,body").animate({scrollTop:0},500)}),$("#go-top .uc-2vm").hover(function(){$("#go-top .uc-2vm-pop").removeClass("dn")},function(){$("#go-top .uc-2vm-pop").addClass("dn")})}),$(function(){$("[event-node=logout]").click(function(){var t=$(this).data("url");$.get(t,function(t){toast.success(t.msg+"。","温馨提示"),setTimeout(function(){location.href=t.url},1500)},"json")})});var scan_login={userInfo:null,callback:null,sceneKey:null,apiHost:window.location.origin,createSceneKey:function(){this.sceneKey=Number(Math.random().toString().substr(2,48)+Date.now()).toString(36)},initWechatQrcode:function(t){this.createSceneKey();var e=this.apiHost+"/channel/official/loginQrcode?scene_key="+this.sceneKey;$(t).attr("src",e),this.hasScan()},hasScan:function(){var e=this;$.get(this.apiHost+"/channel/official/hasScan",{scene_key:this.sceneKey},function(t){200==t.code?(e.userInfo=t.data,"function"==typeof e.callback&&e.callback()):setTimeout(function(){e.hasScan()},3e3)})},login:function(){console.log(12312312),$.post(this.apiHost+"/channel/official/scanLogin",{openid:this.userInfo.openid,scene_key:this.sceneKey},function(t){200==t.code?(toast.success(t.msg),t.data&&localStorage.setItem("user_token",t.data),null==t.url&&"quickLogin"==quickLogin?($('[data-role="login_info"]').append(t.msg),setTimeout(function(){window.location.reload()},1500)):"refresh"==t.url?setTimeout(function(){location.href=location.href},1500):setTimeout(function(){location.href=t.url},1500)):toast.error(t.msg),toast.hideLoading()})}},scan_qrcode={userInfo:null,callback:null,sceneKey:null,apiHost:window.location.origin,createSceneKey:function(){this.sceneKey=Number(Math.random().toString().substr(2,48)+Date.now()).toString(36)},initWechatQrcode:function(t){this.createSceneKey();var e=this.apiHost+"/channel/official/qrcode?scene_key="+this.sceneKey;$(t).attr("src",e)},hasScan:function(){var e=this;$.get(this.apiHost+"/channel/official/hasScan",{scene_key:this.sceneKey},function(t){200==t.code?(e.userInfo=t.data,"function"==typeof e.callback&&e.callback()):setTimeout(function(){e.hasScan()},3e3)})},login:function(){$.post(this.apiHost+"/channel/official/scanLogin",{openid:this.userInfo.openid,scene_key:this.sceneKey},function(t){200==t.code?(toast.success(t.msg),t.data&&localStorage.setItem("user_token",t.data),null==t.url&&"quickLogin"==quickLogin?($('[data-role="login_info"]').append(t.msg),setTimeout(function(){window.location.reload()},1500)):"refresh"==t.url?setTimeout(function(){location.href=location.href},1500):setTimeout(function(){location.href=t.url},1500)):toast.error(t.msg),toast.hideLoading()})}},toast={success:function(t){toast.show(t,{placement:"center",type:"success",close:!0})},error:function(t){toast.show(t,{placement:"center",type:"danger",close:!0})},info:function(t){toast.show(t,{placement:"center",type:"info",close:!0})},warning:function(t,e){toast.show(t,{placement:"center",type:"warning",close:!0})},show:function(t,e){($.zui?$.zui:$).messager.show(t,e)},showLoading:function(){$("body").append('<div class="big_loading"><img src="/static/common/images/big_loading.gif"/></div>')},hideLoading:function(){$("div").remove(".big_loading")}};jQuery,function(t){var e=null;function o(){this.opction=null,this.patchOpction=null,this.swf_path="",this.uploader=null,e=t.WebUploader}o.prototype.init=function(t){if(!e)throw new Error("请引入对应的webuploader.js文件，具体下载地址在webuploader官网");if(!e.Uploader.support())throw new Error("Web Uploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器");if(this.opction=t,this.swf_path=this.opction.swf_path,this.patchOpction=this.opction.patchOpction,!this.swf_path)throw new Error("webuploader 组件的swf路径为空，请设置路径");return this.patchOpction&&e.Uploader.register({"add-file":"addFile","before-send-file":"beforeSendFile","before-send":"beforeSend","after-send-file":"afterSendFile"},{addFile:this.patchOpction.addFile||function(t){console.log(t)},beforeSendFile:this.patchOpction.beforeSendFile||function(t){console.log(t)},beforeSend:this.patchOpction.beforeSend||function(t){console.log(t)},afterSendFile:this.patchOpction.afterSendFile||function(t){console.log(t)}}),this.uploader=e.create({dnd:this.opction.dnd,disableGlobalDnd:this.opction.disableGlobalDnd||!1,paste:document.body,pick:{id:"#"+this.opction.selectFileId,innerHTML:this.opction.selectFileLabel||"点击选择图片",multiple:this.opction.selectFileMultiple||!1},accept:this.opction.accept||{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/*"},thumb:this.opction.thumb||{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,type:"image/jpeg"},compress:this.opction.compress||{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0,noCompressIfLarger:!1,compressSize:0},auto:this.opction.auto||!1,runtimeOrder:this.opction.runtimeOrder||"html5,flash",prepareNextFile:this.opction.prepareNextFile||!1,chunked:this.opction.chunked||!1,chunkSize:this.opction.chunkSize||5242880,chunkRetry:this.opction.chunkRetry||2,threads:this.opction["threads "]||3,fileVal:this.opction.fileVal||"file",method:this.opction.method||"POST",formData:this.opction["formData "]||{},sendAsBinary:this.opction.sendAsBinary||!1,fileNumLimit:this.opction.fileNumLimit||1,fileSizeLimit:this.opction.fileSizeLimit||5242880,fileSingleSizeLimit:this.opction.fileSingleSizeLimit||1048576,duplicate:this.opction.duplicate,swf:this.swf_path,server:this.opction.server}),this.uploader.on("beforeFileQueued",this.opction.beforeFileQueued||function(t){console.log(t)}),this.uploader.on("fileQueued",this.opction.fileQueued||function(t){console.log("fileQueued",t)}),this.uploader.on("filesQueued",this.opction.filesQueued||function(t){console.log("filesQueued",t)}),this.uploader.on("fileDequeued",this.opction.fileDequeued||function(t){console.log("fileDequeued",t)}),this.uploader.on("reset",this.opction.reset||function(){}),this.uploader.on("startUpload",this.opction.startUpload||function(){}),this.uploader.on("stopUpload",this.opction.stopUpload||function(){}),this.uploader.on("uploadFinished",this.opction.uploadFinished||function(){}),this.uploader.on("uploadStart",this.opction.uploadStart||function(t){console.log("uploadStart",t)}),this.uploader.on("uploadBeforeSend",this.opction.uploadBeforeSend||function(t,e,o){console.log("uploadBeforeSend",t,e,o)}),this.uploader.on("uploadAccept",this.opction.uploadAccept||function(t,e){console.log("uploadAccept",t,e)}),this.uploader.on("uploadProgress",this.opction.uploadProgress||function(t,e){console.log("uploadProgress",t,e)}),this.uploader.on("uploadError",this.opction.uploadError||function(t,e){console.log("uploadError",t,e,"上传失败")}),this.uploader.on("uploadSuccess",this.opction.uploadSuccess||function(t,e){console.log("uploadSuccess",t,e,"上传成功")}),this.uploader.on("uploadComplete",this.opction.uploadComplete||function(t){console.log("uploadComplete",t,"上传结束")}),this.uploader.on("error",this.opction.error||function(t){console.log("error",t)}),this.uploader},t.muuUploader=new o}(window,$);